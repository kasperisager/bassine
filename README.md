# Bassine

> An asynchronous and bounded resource pool for generic objects

Bassine provides an implementation of a resource pool aimed at allowing bounded construction and re-use of expensive-to-allocate objects. This is for example the case with objects that spawn and control external processes such as database connections or headless browsers.

## Contents

-   [Installation](#installation)
-   [Usage](#usage)
-   [Benchmark](#benchmark)
-   [API](#api)
-   [License](#license)

## Installation

```console
$ npm install --save bassine
```

## Usage

[<img src=https://tonicdev.com/favicon.ico width=26 align=top> **Try out Bassine in your browser**](https://tonicdev.com/npm/bassine)

```js
const pool = new Pool(2, async i => i);

const one = await pool.borrow();
// => 1

const two = await pool.borrow();
// => 2

pool.return(one);
pool.return(two);
```

## API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Pool

#### constructor

Create a new pool.

**Parameters**

-   `limit` **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** The limit on the number of items available in the pool.
-   `factory` **[Function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function)** The factory function for constructing items for the pool.

**Examples**

```javascript
const pool = new Pool(10, async i => `Item ${i}`);
```

#### borrow

Borrow an item from this pool.

**Examples**

```javascript
const borrowed = await pool.borrow();
// => 'Item 0'
```

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** A promise that will resolve with the item when available.

#### return

Return an item to this pool.

**Parameters**

-   `item` **any** The item to return to this pool.

**Examples**

```javascript
const returned = pool.return(borrowed);
// => true
```

Returns **[Boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** `true` if the item was accepted by this pool, otherwise `false`.

## License

Copyright Â© 2016 [Kasper Kronborg Isager](https://github.com/kasperisager). Licensed under the terms of the [MIT license](LICENSE.md).
